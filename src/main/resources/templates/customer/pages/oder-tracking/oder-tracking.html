<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>LightBee | Tra Cứu Đơn Hàng</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
          rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/assets/customer/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/style.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/custom.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/tracking.css" type="text/css">
    <link rel="stylesheet" href="/assets/customer/css/profile.css?v=2.0" type="text/css">
</head>

<body>
<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>

<!-- Offcanvas Menu Begin -->
<div class="offcanvas-menu-overlay"></div>
<div class="offcanvas-menu-wrapper">
    <div class="offcanvas__option">
        <div class="offcanvas__links">
            <a href="#">Đăng nhập</a>
            <a href="#">FAQs</a>
        </div>
        <div class="offcanvas__top__hover">
            <span>Usd <i class="arrow_carrot-down"></i></span>
            <ul>
                <li>USD</li>
                <li>EUR</li>
                <li>USD</li>
            </ul>
        </div>
    </div>
    <div class="offcanvas__nav__option">
        <a href="#" class="search-switch"><img src="/assets/customer/img/icon/search.png" alt=""></a>
        <a href="#"><img src="/assets/customer/img/icon/heart.png" alt=""></a>
        <a href="#"><img src="/assets/customer/img/icon/cart.png" alt=""> <span>0</span></a>
        <div class="price">$0.00</div>
    </div>
    <div id="mobile-menu-wrap"></div>
    <div class="offcanvas__text">
        <p>Miễn phí vận chuyển, đảm bảo hoàn trả hoặc hoàn tiền trong 30 ngày.</p>
    </div>
</div>
<!-- Offcanvas Menu End -->

<!-- Header Section Begin -->
<div th:replace="~{/customer/pages/_header.html}"></div>
<!-- Header Section End -->

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__text">
                    <h4>Tra Cứu Đơn Hàng</h4>
                    <div class="breadcrumb__links">
                        <a href="/index">Trang chủ</a>
                        <span>Tra Cứu</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->

<!-- About Section Begin -->
<section class="oder-tracking spad">
    <th:block th:if="${show==null}">
        <div class="container">
            <div class="wraper-tracking">
                <form action="/oder-tracking" method="get">
                    <div class="row w-100-vh">
                        <div class="row w-100 p-4 wrapper-form">
                            <div class="col-9 p-0">
                                <input class="w-100 form-seacrh" name="oder" placeholder="Nhập mã hóa đơn cần tra cứu">
                            </div>
                            <div class="col-3 p-0 pl-1">
                                <button class="primary-btn" type="submit">Tra Cứu</button>
                            </div>
                        </div>
                        <div class="w-100 mt-3 d-flex justify-content-center">
                            <img src="/assets/customer/img/tracking/giao-hang.png" alt="Giao Hàng">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </th:block>
    <th:block th:if="${show!=null}">
        <div class="container">
            <div class="wraper-search">
                <form action="/oder-tracking" method="get">
                    <div class="row w-100-vh">
                        <div class="row w-100 p-4 wrapper-form">
                            <div class="col-9 p-0">
                                <input class="w-100 form-seacrh" th:value="${show}" name="oder"
                                       placeholder="Nhập mã hóa đơn cần tra cứu">
                            </div>
                            <div class="col-3 p-0 pl-1">
                                <button class="primary-btn" type="submit">Tra Cứu</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div th:if="${hoadon==null}">
                <div class="w-100 d-flex flex-column align-items-center">
                    <img width="300" height="350" src="/assets/cms/svg/illustrations/think.svg" alt="">
                    <h4 class="text-error">Mã Hóa Đơn Không Đúng !</h4>
                    <div>Chúng tôi không tìm thấy mã hóa đơn của bạn trong hệ thống.</div>
                    <div>Vui lòng kiểm tra lại mã hóa đơn.</div>
                </div>

            </div>
            <article class="card" th:if="${hoadon!=null}">
                <header class="card-header">Mã Hóa Đơn:<strong id="oder-code" th:text="${hoadon.getMaHoaDon()}"></strong></header>
                <div class="card-body">
                    <article class="card">
                        <div class="card-body row">
                            <div class="col"><strong>Ngày Giao Dự Kiến:</strong> <br>29/12/2024</div>
                            <div class="col"><strong>Đơn Vị:</strong> <br>Giao Hàng Nhanh</div>
                            <div class="col"><strong>Trạng Thái:</strong> <br>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='Huy'}">Đã Hủy</th:block>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='ChoXuLy'}">Chờ Xử Lý</th:block>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='ChoXacNhan'}">Chờ Xác Nhận</th:block>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='ChoGiao'}">Chờ Giao</th:block>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='DangGiao'}">Đang Giao</th:block>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='HoanTra'}">Hoàn Trả</th:block>
                                <th:block th:if="${hoadon != null and hoadon.getTrangThai().name()=='ThanhCong'}">Thành Công</th:block>
                            </div>
                            <div class="col"><strong>Mã Vận Chuyển:</strong> <br> <a target="_blank"
                                                                                     th:href="'https://donhang.ghn.vn/?order_code='+${hoadon.getMaVanChuyen()}" th:text="${hoadon.getMaVanChuyen()}"></a>
                            </div>
                        </div>
                    </article>
                    <div class="track">

                        <div class="step active">
                            <span class="icon">
                                <i class="fa fa-check"></i> </span>
                            <span class="text">Chờ Xác Nhận</span>
                        </div>

                        <div class="step">
                            <span class="icon">
                                <i class="fa fa-user"></i>
                            </span>
                            <span class="text">Chuẩn Bị Hàng</span>
                        </div>

                        <div class="step">
                            <span class="icon">
                                <i class="fa fa-ambulance" aria-hidden="true"></i>
                            </span>
                            <span class="text">Chờ Giao</span>
                        </div>

                        <div class="step">
                            <span class="icon">
                                <i class="fa fa-truck"></i>
                            </span>
                            <span class="text">Đang Giao</span>
                        </div>

                        <div class="step">
                            <span class="icon">
                                <i class="fa fa-archive"></i>
                            </span>
                            <span class="text">Thành Công</span>
                        </div>

                        <div class="step d-none">
                            <span class="icon">
                                <i class="fa fa-times" aria-hidden="true"></i>
                            </span>
                            <span class="text">Thất Bại</span>
                        </div>

                    </div>
                    <hr class="mb-0">
                    <div class="card-body mt-0">
                        <div class="card_content">
                            <ul class="w-100">
                                <li class="row" th:each="sanpham:${hoadon.getHoaDonChiTiets()}">
                                    <div class="col-2 p-0">
                                        <img class="product_img"
                                             th:src="${sanpham.getChiTietSanPham().getAnh().getUrl()}">
                                    </div>
                                    <div class="col-7 content_product p-0">
                                        <div>
                                            <h6 class="product_name mb-2" th:text="${sanpham.getChiTietSanPham().getSanPham().getTen()}"></h6>
                                            <div class="w-100">
                                                Màu :<label th:text="${sanpham.getChiTietSanPham().getMauSac().getTen()}"></label>, Kích Cỡ :<label th:text="${sanpham.getChiTietSanPham().getMauSac().getTen()}"></label>
                                            </div>
                                            <label th:text="'Số Lượng :'+${sanpham.getSoLuong()}"></label>
                                        </div>
                                    </div>
                                    <div class="col-3 d-flex align-items-center">
                                        <h5 class="product_price_cu" th:text="${#numbers.formatDecimal(sanpham.getChiTietSanPham().getGiaGoc(), 1, 'DEFAULT', 0, 'DEFAULT')}+'đ'"></h5>
                                        <h5 class="product_price"  th:text="${#numbers.formatDecimal(sanpham.getChiTietSanPham().getGiaBan(), 1, 'DEFAULT', 0, 'DEFAULT')}+'đ'"></h5>
                                    </div>
                                    <div class="col-1 d-none  align-items-center btn-del-group">
                                        <button class="btn-delete" th:attr="data-id-ctsp=${sanpham.getChiTietSanPham().getId()}" data-toggle="tooltip" title="Xóa Sản Phẩm">
                                            <i class="fa fa-close"></i>
                                        </button>
                                    </div>
                                </li>
                            </ul>
                            <button data-toggle="modal" data-target="#select_product" id="btn-add-product"
                                    class="d-none"><i
                                    class="fa fa-plus" aria-hidden="true"></i></button>
                        </div>
                    </div>
                    <div class="w-100 d-flex justify-content-end mt-3 pr-3">
                        <label class="">Tổng :</label><h5 class="show_discount_money ml-2 mb-0"  th:text="${#numbers.formatDecimal(hoadon.getTongTien(), 1, 'DEFAULT', 0, 'DEFAULT')}+'đ'"></h5>
                    </div>
                    <div class="w-100 d-flex justify-content-end mt-1 pr-3">
                        <label class="">Giảm Giá :</label><h6 class="show_discount_money ml-2 mb-0" th:text="${#numbers.formatDecimal(hoadon.getTongTien()-hoadon.getThucThu(), 1, 'DEFAULT', 0, 'DEFAULT')}+'đ'" ></h6>
                    </div>
                    <div class="w-100 thanh-tien d-flex justify-content-end align-items-center mt-1 mb-3 pr-3">
                        <label class="mb-0">Thành Tiền: </label><h4 class="show_total_money" th:text="${#numbers.formatDecimal(hoadon.getThucThu(), 1, 'DEFAULT', 0, 'DEFAULT')}+'đ'">9.000.000đ</h4>
                    </div>
                    <div class="d-flex justify-content-between">
                        <div>
                            <a href="/" class="primary-btn" data-abc="true"> <i class="fa fa-chevron-left"></i> Trang
                                Chủ</a>
                        </div>
                        <th:block th:if="${user != null}">
                            <div th:if="${user.getKhachHang()!= null and hoadon.getKhachHang() != null and  user.getKhachHang().getId()== hoadon.getKhachHang().getId()}">
                                <a id="btn-show-update" class="info-btn" data-update="0">Cập Nhật</a>
                                <a href="/" class="info-btn">Hủy Đơn</a>
                            </div>
                        </th:block>
                    </div>
                </div>
            </article>
            <div class="card w-100 mt-4" th:if="${hoadon!=null}">
                <h4 class="text-center mb-2 mt-2">Lịch Sử Đơn Hàng</h4>
                <hr>
                <div class="w-100 row justify-content-center">
                    <div class="col-3 times">
                       22/12/2025 15:25:00
                    </div>
                    <div class="col-9 actions">
                        Đã tạo đơn hàng
                    </div>
                </div>
                <hr>
            </div>
        </div>
    </th:block>
</section>
<!-- About Section End -->


<!-- Footer Section Begin -->
<div th:replace="~{/customer/pages/_footer.html}"></div>
<!-- Footer Section End -->
<div class="modal fade" id="select_product" data-backdrop="static" data-keyboard="false" tabindex="-1"
     aria-labelledby="select_productLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="select_productLabel">Chọn Sản Phẩm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>

            </div>
            <div class="modal-body p-4">
                <div class="w-100">
                    <label for="tenSanPham" class="pointer mb-0 w-100">Sản Phẩm :</label>
                    <select class="w-100 mb-3" type="text" id="tenSanPham"></select>
                </div>
                <div class="row">
                    <div class="col-6">
                        <img id="preview-img" class="img-product-preview" width="200" height="200"
                             src="/assets/customer/img/about/ludeptrai.jpg" alt="">
                    </div>
                    <div class="col-6">
                        <label for="mauSac" class="pointer mb-0 w-100">Màu Sắc :</label>
                        <select class="w-100 mb-3" type="text" id="mauSac"></select>
                        <label for="kichCo" class="pointer mb-0 w-100">Kích Cỡ:</label>
                        <select class="w-100 mb-3" type="text" id="kichCo"></select>
                        <label for="soLuong" class="pointer mb-0 w-100">Số Lượng:</label>
                        <input class="w-100  form-input-custom" type="text" id="soLuong">
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn info-btn" data-dismiss="modal">Đóng</button>
                <button id="btn-select" type="button" class="btn primary-btn">Chọn</button>
            </div>
        </div>
    </div>
</div>

<!-- Search Begin -->
<div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Tìm kiếm ở đây.....">
        </form>
    </div>
</div>
<!-- Search End -->

<!-- Js Plugins -->
<script src="/assets/customer/js/jquery-3.3.1.min.js"></script>
<script src="/assets/customer/js/bootstrap.min.js"></script>
<script src="/assets/customer/js/jquery.nice-select.min.js"></script>
<script src="/assets/customer/js/jquery.nicescroll.min.js"></script>
<script src="/assets/customer/js/jquery.magnific-popup.min.js"></script>
<script src="/assets/customer/js/jquery.countdown.min.js"></script>
<script src="/assets/customer/js/jquery.slicknav.js"></script>
<script src="/assets/customer/js/mixitup.min.js"></script>
<script src="/assets/customer/js/owl.carousel.min.js"></script>
<script src="/assets/customer/js/main.js"></script>
<script src="/assets/customer/js/tracking/tracking.js"></script>
<script>
    setTabsHeader('about');
</script>
</body>

</html>